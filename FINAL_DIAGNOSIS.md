# üîç –§–∏–Ω–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ 404 –¥–ª—è /api/telegram/fetchAndSaveToServer

## ‚úÖ –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ:
1. ‚úÖ –ö–æ–¥ –Ω–∞ Synology —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞—Ä—à—Ä—É—Ç: `src/routes/telegramRoutes.ts:997`
2. ‚úÖ –ú–∞—Ä—à—Ä—É—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è: `export default router`
3. ‚úÖ –ú–∞—Ä—à—Ä—É—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω –≤ `index.ts`: `app.use("/api/telegram", telegramRoutes)`
4. ‚úÖ Nginx –Ω–∞ VPS –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –Ω–∞ `http://10.9.0.2:3000`
5. ‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
Endpoint –≤—Å–µ –µ—â–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404 –¥–∞–∂–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

## üîç –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

### 1. –ü—Ä–æ–±–ª–µ–º–∞ —Å –∫–æ–º–ø–∏–ª—è—Ü–∏–µ–π TypeScript
–ö–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –í–æ–∑–º–æ–∂–Ω–æ:
- –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ (–Ω–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è)
- –ú–∞—Ä—à—Ä—É—Ç –Ω–µ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—É—Ç—è–º–∏ –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

### 2. –ü—Ä–æ–±–ª–µ–º–∞ —Å –º–µ—Ç–æ–¥–æ–º HTTP
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–∞–ø—Ä–æ—Å –∏–¥–µ—Ç –∫–∞–∫ **POST**, –∞ –Ω–µ GET:
```bash
# –ü—Ä–∞–≤–∏–ª—å–Ω–æ (POST):
curl -X POST http://10.9.0.2:3000/api/telegram/fetchAndSaveToServer

# –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (GET):
curl http://10.9.0.2:3000/api/telegram/fetchAndSaveToServer
```

### 3. –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—É—Ç–µ–º
–ú–∞—Ä—à—Ä—É—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –∫–∞–∫ `/fetchAndSaveToServer`, –Ω–æ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫–∞–∫ `/api/telegram`, –∑–Ω–∞—á–∏—Ç –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `/api/telegram/fetchAndSaveToServer`.

## üîß –†–µ—à–µ–Ω–∏–µ:

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
–ü—Ä–∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã –ª–æ–≥–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ TypeScript. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ—Ç –ª–∏ –æ—à–∏–±–æ–∫.

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
```bash
# –ù–∞ Synology (—á–µ—Ä–µ–∑ SSH —Å–µ—Å—Å–∏—é, –≥–¥–µ —É–∂–µ –µ—Å—Ç—å sudo –¥–æ—Å—Ç—É–ø)
sudo docker exec shorts-backend ls -la /app/dist/routes/
sudo docker exec shorts-backend cat /app/dist/routes/telegramRoutes.js | grep -i "fetchAndSaveToServer"
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –º–∞—Ä—à—Ä—É—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
sudo docker logs shorts-backend | grep -i "route\|telegram\|listening"
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å POST –∑–∞–ø—Ä–æ—Å
```bash
# –° VPS –Ω–∞ Synology (POST –∑–∞–ø—Ä–æ—Å)
curl -X POST -i http://10.9.0.2:3000/api/telegram/fetchAndSaveToServer -H "Content-Type: application/json" -d '{"channelId":"test"}'
```

### –®–∞–≥ 5: –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ 404 - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥—Ä—É–≥–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–±–æ—Ç–∞—é—Ç –ª–∏ –¥—Ä—É–≥–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã
curl -i http://10.9.0.2:3000/api/telegram/status
curl -i http://10.9.0.2:3000/health
```

## üéØ –ï—Å–ª–∏ –¥—Ä—É–≥–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç, –∞ fetchAndSaveToServer –Ω–µ—Ç:

–í–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ:
1. –ú–∞—Ä—à—Ä—É—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –ø–æ—Å–ª–µ –∫–∞–∫–æ–≥–æ-—Ç–æ middleware, –∫–æ—Ç–æ—Ä—ã–π –µ–≥–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç
2. –ï—Å—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å –¥—Ä—É–≥–∏–º –º–∞—Ä—à—Ä—É—Ç–æ–º
3. –ü—Ä–æ–±–ª–µ–º–∞ —Å authRequired middleware

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—è–¥–æ–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ `telegramRoutes.ts`.

