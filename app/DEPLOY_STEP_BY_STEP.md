# üöÄ –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–µ–ø–ª–æ—è (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è)

## ‚ö†Ô∏è –í–∞–∂–Ω–æ: –û—Ç–∫—É–¥–∞ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã

- **–° –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ (Windows)** - –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∏ –∑–∞–ø—É—Å–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è
- **–ù–∞ VPS** - —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–±—Ä–æ—Å–∞ –ø–æ—Ä—Ç–æ–≤
- **–ù–∞ Synology** - —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –¥–µ–ø–ª–æ–∏—Ç–µ –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ Synology

---

## –®–∞–≥ 1: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –Ω–∞ VPS (—Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞!)

**–û—Ç–∫—Ä–æ–π—Ç–µ PowerShell –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (–ù–ï –Ω–∞ VPS!):**

```powershell
# –í—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
cd C:\Users\studo\Downloads\p039-master\p039-master

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–∞ VPS (—Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞!)
scp backend/vps/synology-port-forward.sh root@185.104.248.130:/root/
```

**–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –æ—Ç VPS, –∫–æ–≥–¥–∞ –ø–æ–ø—Ä–æ—Å–∏—Ç.**

---

## –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–±—Ä–æ—Å–∞ –ø–æ—Ä—Ç–æ–≤ (–Ω–∞ VPS)

**–¢–µ–ø–µ—Ä—å –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ VPS:**

```bash
ssh root@185.104.248.130
```

**–ù–∞ VPS –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:**

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω
ls -la /root/synology-port-forward.sh

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ
chmod +x /root/synology-port-forward.sh
sudo /root/synology-port-forward.sh
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ VPS:**

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ iptables
sudo iptables -t nat -L PREROUTING -n -v | grep 5001

# –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞ —Å DNAT –Ω–∞ 10.8.0.2:8080
```

---

## –®–∞–≥ 3: –î–µ–ø–ª–æ–π –Ω–∞ Synology (—Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞!)

**–í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ –≤–∞—à –∫–æ–º–ø—å—é—Ç–µ—Ä (–≤—ã–π–¥–∏—Ç–µ –∏–∑ SSH –Ω–∞ VPS):**

```powershell
# –ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (PowerShell)
cd C:\Users\studo\Downloads\p039-master\p039-master\backend

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
$env:SYNO_HOST = "hotwell.synology.me"  # –∏–ª–∏ IP –∞–¥—Ä–µ—Å Synology
$env:SYNO_USER = "admin"

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π
# (—Å–∫—Ä–∏–ø—Ç —Å–∞–º –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ Synology –ø–æ SSH)
bash deploy_synology_auto.sh
```

**–ò–ª–∏ –µ—Å–ª–∏ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Git Bash –∏–ª–∏ WSL:**

```bash
cd backend
export SYNO_HOST="hotwell.synology.me"
export SYNO_USER="admin"
chmod +x deploy_synology_auto.sh
./deploy_synology_auto.sh
```

**–°–∫—Ä–∏–ø—Ç –ø–æ–ø—Ä–æ—Å–∏—Ç –ø–∞—Ä–æ–ª—å –æ—Ç Synology (–µ—Å–ª–∏ SSH –∫–ª—é—á–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã).**

---

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –î–µ–ø–ª–æ–π –ø—Ä—è–º–æ –Ω–∞ Synology

–ï—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ Synology –Ω–∞–ø—Ä—è–º—É—é:

```bash
# –° –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ Synology
ssh admin@hotwell.synology.me

# –ù–∞ Synology –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
cd /volume1/shortsai
git clone https://github.com/hotwellkz/p041.git app
cd app/backend
chmod +x deploy_to_synology_production.sh
sudo ./deploy_to_synology_production.sh
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

**–ù–∞ Synology:**

```bash
# –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
curl http://127.0.0.1:8080/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ pm2
pm2 status
pm2 logs shortsai-backend
```

**–° –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ (—á–µ—Ä–µ–∑ VPS):**

```powershell
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
curl http://185.104.248.130:5001/health
```

---

## –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### ‚ùå –û—à–∏–±–∫–∞: "No such file or directory"

**–ü—Ä–∏—á–∏–Ω–∞:** –í—ã –ø—ã—Ç–∞–µ—Ç–µ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –Ω–µ –≤ —Ç–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏–ª–∏ –Ω–µ –Ω–∞ —Ç–æ–º —Å–µ—Ä–≤–µ—Ä–µ.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã —Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
- –î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ VPS - —Å–Ω–∞—á–∞–ª–∞ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª, –ø–æ—Ç–æ–º –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ VPS
- –î–ª—è –¥–µ–ø–ª–æ—è - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –∏–ª–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ Synology

### ‚ùå –û—à–∏–±–∫–∞: "Permission denied"

**–†–µ—à–µ–Ω–∏–µ:**
- –ù–∞ VPS –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `sudo`
- –ù–∞ Synology –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `sudo` –∏–ª–∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã admin

### ‚ùå –û—à–∏–±–∫–∞: "Connection refused" –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —á–µ—Ä–µ–∑ VPS

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏–ª–∏ VPN —Ç—É–Ω–Ω–µ–ª—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ VPN —Ç—É–Ω–Ω–µ–ª—å: `ping 10.8.0.2` (–Ω–∞ VPS)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ iptables: `sudo iptables -t nat -L PREROUTING -n -v`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω –Ω–∞ Synology: `pm2 status` (–Ω–∞ Synology)

---

## –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å

```
1. [–í–∞—à –∫–æ–º–ø—å—é—Ç–µ—Ä] ‚Üí scp —Å–∫—Ä–∏–ø—Ç –Ω–∞ VPS
2. [VPS] ‚Üí –∑–∞–ø—É—Å—Ç–∏—Ç—å synology-port-forward.sh
3. [–í–∞—à –∫–æ–º–ø—å—é—Ç–µ—Ä] ‚Üí –∑–∞–ø—É—Å—Ç–∏—Ç—å deploy_synology_auto.sh (–æ–Ω –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ Synology)
   –ò–õ–ò
3. [Synology] ‚Üí –∑–∞–ø—É—Å—Ç–∏—Ç—å deploy_to_synology_production.sh –Ω–∞–ø—Ä—è–º—É—é
```


