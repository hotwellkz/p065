# Backend Environment Variables
# Скопируй этот файл в .env и заполни значения

# ============================================
# Firebase Admin SDK (для доступа к Firestore)
# ============================================
# ВАЖНО: Для бэкенда нужен Service Account, а не обычные Firebase конфигурационные переменные!
# 
# Вариант 1 (рекомендуется): Полный JSON Service Account
# Получи Service Account JSON:
# 1. Открой https://console.firebase.google.com/
# 2. Выбери проект → Project Settings → Service Accounts
# 3. Нажми "Generate new private key"
# 4. Скопируй весь JSON и вставь сюда (в одну строку, в кавычках)
FIREBASE_SERVICE_ACCOUNT={"type":"service_account","project_id":"your-project-id",...}

# ИЛИ Вариант 2: Отдельные переменные из Service Account JSON
# Распарси JSON и используй эти поля:
FIREBASE_PROJECT_ID=your-project-id
FIREBASE_CLIENT_EMAIL=your-service-account@your-project.iam.gserviceaccount.com
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"

# ============================================
# Telegram API (для работы с SyntX)
# ============================================
# Получи на https://my.telegram.org/apps
TELEGRAM_API_ID=12345678
TELEGRAM_API_HASH=your-api-hash-here
SYNX_CHAT_ID=your-syntx-chat-id

# Секретный ключ для шифрования Telegram сессий (32 байта в hex = 64 символа)
# Сгенерируй: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
TELEGRAM_SESSION_SECRET=your-64-char-hex-secret-here

# Зашифрованная Telegram сессия (для Cloud Run / продакшена)
# Получи после успешного логина через: npm run export:telegram-session
# ВАЖНО: Используйте одинаковый TELEGRAM_SESSION_SECRET для шифрования/расшифровки!
TELEGRAM_SESSION_ENCRYPTED=your-encrypted-session-string-here

# ============================================
# Google Drive API (для сохранения видео)
# ============================================
# Получи Service Account для Google Drive:
# 1. Открой https://console.cloud.google.com/
# 2. APIs & Services → Credentials → Create Credentials → Service Account
# 3. Создай Service Account и скачай JSON ключ
# 4. Распарси JSON и используй эти поля:
GOOGLE_DRIVE_CLIENT_EMAIL=your-service-account@your-project.iam.gserviceaccount.com
GOOGLE_DRIVE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"
# Опционально: ID папки по умолчанию (если у канала не задан googleDriveFolderId)
GOOGLE_DRIVE_DEFAULT_PARENT=your-default-folder-id

# ============================================
# Google OAuth 2.0 (для персональной интеграции Google Drive)
# ============================================
# Получи OAuth 2.0 credentials для веб-приложения:
# 1. Открой https://console.cloud.google.com/
# 2. APIs & Services → Credentials → Create Credentials → OAuth client ID
# 3. Выбери "Web application"
# 4. Добавь Authorized redirect URIs:
#    - Для разработки: http://localhost:5173/google-drive/callback
#    - Для продакшена: https://your-domain.com/google-drive/callback
# 5. Скопируй Client ID и Client Secret
GOOGLE_CLIENT_ID=your-google-oauth-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-oauth-client-secret
GOOGLE_OAUTH_REDIRECT_URL=http://localhost:5173/google-drive/callback

# ============================================
# Server Configuration
# ============================================
PORT=8080
FRONTEND_ORIGIN=http://localhost:5173

# Секрет для JWT (любая случайная строка)
JWT_SECRET=your-jwt-secret-here

# Секрет для cron jobs (любая случайная строка)
CRON_SECRET=your-cron-secret-here

# ============================================
# Local Storage (для хранения видео на сервере)
# ============================================
# Путь к корневой директории для хранения видео
# По умолчанию (для локальной разработки): ./storage/videos
# Для продакшена: /data/shortsai/videos
# 
# Структура папок:
# <STORAGE_ROOT>/
#   <channelSlug>/                    # Входная папка - сюда сохраняются новые видео
#     <filename>.mp4                  # Входящие файлы для автопубликации
#     ...
#     Загруженные - <channelName>/    # Архивная папка - сюда перемещаются файлы после успешной публикации
#       <filename>.mp4
#       ...
STORAGE_ROOT=/data/shortsai/videos

# ============================================
# Публичный URL backend (КРИТИЧНО!)
# ============================================
# ВАЖНО: Для работы с Blotato нужен ПУБЛИЧНЫЙ URL, а не localhost!
# Blotato работает на внешнем сервере и не может получить доступ к localhost:8080
# 
# Схема деплоя (Production):
# - Backend физически работает на Synology NAS (порт 8080 локально)
# - Внешний доступ через VPS со статическим IP (порт 5001)
# - VPS пробрасывает порт 5001 на Synology:8080 через VPN туннель
# - BACKEND_URL должен указывать на публичный адрес VPS
#
# Пример для Production:
#   BACKEND_URL=http://185.104.248.130:5001
#
# Для локальной разработки можно использовать ngrok:
#   ngrok http 8080
#   BACKEND_URL=https://your-ngrok-url.ngrok.io
#
# Если не указан, будет использован localhost (НЕ РАБОТАЕТ С BLOTATO!)
# BACKEND_URL=http://localhost:8080






