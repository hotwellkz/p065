# üöÄ –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π –Ω–∞ Synology - –û–î–ù–ê –ö–û–ú–ê–ù–î–ê

## –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–ø—É—Å–∫ —Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π)

–°–∫—Ä–∏–ø—Ç —Å–∞–º –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ Synology –ø–æ SSH –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç –¥–µ–ø–ª–æ–π:

```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–µ—Å–ª–∏ –µ—â—ë –Ω–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω)
git clone https://github.com/hotwellkz/p041.git
cd p041/backend

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
export SYNO_HOST="hotwell.synology.me"  # –∏–ª–∏ IP –∞–¥—Ä–µ—Å
export SYNO_USER="admin"                 # –≤–∞—à –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Synology
# export SYNO_SSH_KEY_PATH="~/.ssh/id_rsa"  # –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ SSH –∫–ª—é—á

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π
chmod +x deploy_synology_auto.sh
./deploy_synology_auto.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –ü–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ Synology –ø–æ SSH
- ‚úÖ –°–∫–æ–ø–∏—Ä—É–µ—Ç —Å–µ–±—è –Ω–∞ Synology
- ‚úÖ –í—ã–ø–æ–ª–Ω–∏—Ç –≤–µ—Å—å –¥–µ–ø–ª–æ–π
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç pm2 –∏ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫

## –í–∞—Ä–∏–∞–Ω—Ç 2: –ó–∞–ø—É—Å–∫ –ø—Ä—è–º–æ –Ω–∞ Synology

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ Synology —á–µ—Ä–µ–∑ SSH:

```bash
# 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ Synology
ssh admin@hotwell.synology.me

# 2. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
cd /volume1/shortsai
git clone https://github.com/hotwellkz/p041.git app
cd app/backend

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è
chmod +x deploy_to_synology_production.sh
sudo ./deploy_to_synology_production.sh
```

## –ß—Ç–æ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π (`/volume1/shortsai/app`, `/volume1/shortsai/videos`)
2. ‚úÖ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏–∑ GitHub
3. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Node.js
4. ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è TypeScript
5. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `.env` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º `BACKEND_URL=http://185.104.248.130:5001`
6. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ pm2
7. ‚úÖ –ó–∞–ø—É—Å–∫ backend –Ω–∞ –ø–æ—Ä—Ç—É 8080
8. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
9. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

## –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ Synology:
```bash
curl http://127.0.0.1:8080/health
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ VPS (–ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø):
```bash
curl http://185.104.248.130:5001/health
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
```bash
pm2 status
pm2 logs shortsai-backend
pm2 restart shortsai-backend
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ VPS (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —Å–¥–µ–ª–∞–Ω–æ)

–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º backend —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ VPS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤:

```bash
# –ù–∞ VPS
ssh root@185.104.248.130

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç
# (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ backend/vps/synology-port-forward.sh)

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ
chmod +x synology-port-forward.sh
sudo ./synology-port-forward.sh
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:

- ‚úÖ Node.js v18+ –Ω–∞ Synology (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —á–µ—Ä–µ–∑ Package Center)
- ‚úÖ Git –Ω–∞ Synology (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —á–µ—Ä–µ–∑ Package Center)
- ‚úÖ SSH –¥–æ—Å—Ç—É–ø –∫ Synology –≤–∫–ª—é—á—ë–Ω
- ‚úÖ VPN —Ç—É–Ω–Ω–µ–ª—å –º–µ–∂–¥—É VPS –∏ Synology –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ –ü—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤ –Ω–∞ VPS –Ω–∞—Å—Ç—Ä–æ–µ–Ω

## –ü—Ä–æ–±–ª–µ–º—ã?

–°–º. –ø–æ–¥—Ä–æ–±–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é: `backend/DEPLOY_PRODUCTION.md`


