# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –Ω–∞ Netlify –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±—ç–∫–µ–Ω–¥–æ–º –Ω–∞ Synology

## ‚úÖ –°—Ç–∞—Ç—É—Å –¥–µ–ø–ª–æ—è –±—ç–∫–µ–Ω–¥–∞

–ë—ç–∫–µ–Ω–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –Ω–∞ Synology. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:

```bash
# –ù–∞ Synology
cd /volume1/shortsai/app/backend
pm2 status
# –∏–ª–∏
/usr/local/bin/pm2 status
```

–ï—Å–ª–∏ –±—ç–∫–µ–Ω–¥ –Ω–µ –∑–∞–ø—É—â–µ–Ω, –∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Ä—É—á–Ω—É—é:
```bash
cd /volume1/shortsai/app/backend
pm2 start dist/index.js --name shortsai-backend
pm2 save
```

## üåê –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Netlify

### 1. Backend URL (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

–í–∞—à –±—ç–∫–µ–Ω–¥ –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ VPS –ø–æ –∞–¥—Ä–µ—Å—É:

```
VITE_BACKEND_URL=http://185.104.248.130:5001
```

**–í–∞–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–º–µ–Ω–Ω–æ —ç—Ç–æ—Ç URL, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –ø—Ä–æ–±—Ä–æ—à–µ–Ω —á–µ—Ä–µ–∑ VPN —Ç—É–Ω–Ω–µ–ª—å –Ω–∞ Synology.

### 2. Firebase Configuration (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

–≠—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω—É–∂–Ω—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Firebase Authentication –∏ Firestore:

```
VITE_FIREBASE_API_KEY=AIzaSy...your-api-key-here
VITE_FIREBASE_AUTH_DOMAIN=prompt-6a4fd.firebaseapp.com
VITE_FIREBASE_PROJECT_ID=prompt-6a4fd
VITE_FIREBASE_STORAGE_BUCKET=prompt-6a4fd.firebasestorage.app
VITE_FIREBASE_MESSAGING_SENDER_ID=905027425668
VITE_FIREBASE_APP_ID=1:905027425668:web:38f58912370df2c2be39d1
```

**–ì–¥–µ –ø–æ–ª—É—á–∏—Ç—å:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ [Firebase Console](https://console.firebase.google.com/)
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç `prompt-6a4fd`
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Project Settings** ‚Üí **Your apps** ‚Üí **Web app**
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ **SDK setup and configuration**

### 3. OpenAI Model (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)

–ú–æ–¥–µ–ª—å OpenAI –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:

```
VITE_OPENAI_MODEL=gpt-4o-mini
```

## üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –≤ Netlify

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Netlify Dashboard**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://app.netlify.com/
   - –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à —Å–∞–π—Ç

2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**
   - **Site settings** ‚Üí **Build & deploy** ‚Üí **Environment variables**
   - –ò–ª–∏ **Site settings** ‚Üí **Environment variables**

3. **–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**
   - –ù–∞–∂–º–∏—Ç–µ **Add variable** –¥–ª—è –∫–∞–∂–¥–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
   - –í–≤–µ–¥–∏—Ç–µ **Key** (–∏–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π) –∏ **Value** (–∑–Ω–∞—á–µ–Ω–∏–µ)
   - –í—ã–±–µ—Ä–∏—Ç–µ **Scopes**:
     - ‚úÖ **Production** - –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
     - ‚úÖ **Deploy previews** - –¥–ª—è preview –¥–µ–ø–ª–æ–µ–≤
     - ‚úÖ **Branch deploys** - –¥–ª—è –¥–µ–ø–ª–æ–µ–≤ –∏–∑ –≤–µ—Ç–æ–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

4. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ**
   - –ù–∞–∂–º–∏—Ç–µ **Save**
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–æ–≤—ã–π –¥–µ–ø–ª–æ–π: **Deploys** ‚Üí **Trigger deploy** ‚Üí **Deploy site**

## ‚úÖ –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è:

```env
# Backend URL (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û) - –≤–∞—à –±—ç–∫–µ–Ω–¥ –Ω–∞ Synology —á–µ—Ä–µ–∑ VPS
VITE_BACKEND_URL=http://185.104.248.130:5001

# Firebase (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
VITE_FIREBASE_API_KEY=AIzaSy...your-api-key-here
VITE_FIREBASE_AUTH_DOMAIN=prompt-6a4fd.firebaseapp.com
VITE_FIREBASE_PROJECT_ID=prompt-6a4fd
VITE_FIREBASE_STORAGE_BUCKET=prompt-6a4fd.firebasestorage.app
VITE_FIREBASE_MESSAGING_SENDER_ID=905027425668
VITE_FIREBASE_APP_ID=1:905027425668:web:38f58912370df2c2be39d1

# OpenAI Model (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)
VITE_OPENAI_MODEL=gpt-4o-mini
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±—ç–∫–µ–Ω–¥

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
curl http://185.104.248.130:5001/health

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: {"ok":true}
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –Ω–∞ Netlify:
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (F12)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±—ç–∫–µ–Ω–¥—É
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```javascript
console.log('Backend URL:', import.meta.env.VITE_BACKEND_URL);
console.log('Firebase Project:', import.meta.env.VITE_FIREBASE_PROJECT_ID);
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ü—Ä–µ—Ñ–∏–∫—Å `VITE_` –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω** - —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å —ç—Ç–∏–º –ø—Ä–µ—Ñ–∏–∫—Å–æ–º –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –∫–æ–¥–µ
2. **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `VITE_FIREBASE_APY_KEY`** (—Å –æ–ø–µ—á–∞—Ç–∫–æ–π) - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è `VITE_FIREBASE_API_KEY`
3. **–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö** –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ —Å–∞–π—Ç –≤ Netlify
4. **CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω** - –±—ç–∫–µ–Ω–¥ –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã —Å –¥–æ–º–µ–Ω–∞ Netlify

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞: "Failed to fetch" –∏–ª–∏ "Network error"

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±—ç–∫–µ–Ω–¥ –∑–∞–ø—É—â–µ–Ω:
   ```bash
   # –ù–∞ Synology
   pm2 status
   curl http://127.0.0.1:8080/health
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç 5001 –ø—Ä–æ–±—Ä–æ—à–µ–Ω –Ω–∞ VPS:
   ```bash
   # –ù–∞ VPS
   sudo iptables -t nat -L -n | grep 5001
   ```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –±—ç–∫–µ–Ω–¥–∞ –∏–∑–≤–Ω–µ:
   ```bash
   # –° –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
   curl http://185.104.248.130:5001/health
   ```

### –û—à–∏–±–∫–∞: "CORS policy"

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –±—ç–∫–µ–Ω–¥–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω CORS –¥–ª—è –¥–æ–º–µ–Ω–∞ Netlify. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `backend/src/index.ts`:

```typescript
const FRONTEND_ORIGIN = process.env.FRONTEND_ORIGIN || "https://your-site.netlify.app";
app.use(cors({ origin: FRONTEND_ORIGIN }));
```

### –û—à–∏–±–∫–∞: "401 Unauthorized"

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Firebase –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω.

